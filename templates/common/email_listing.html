{% extends "nlayout.html" %}
{% load i18n %}
{% load libextras %}
{% block html_head %}
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/searchbar.css" />
<script type="text/javascript" src="{{ MEDIA_URL }}js/anchor_nav.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}js/ProgressBar.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}js/email_listing.js"></script>
{% block css %}{% endblock %}
<script type="text/javascript">
var current_anchor = new AnchorNavigation("{{ deflocation }}");

function viewmail(event) {
  event.stop();
  if (event.target.parentNode.id) {
    var url = event.target.parentNode.id;
    event.target.parentNode.setStyle("background", "#ffffcc");
    {% if reset_wm_url %} 
    current_anchor.baseurl(url).update();
    {% else %}
    current_anchor.addbaseurl(url).update();
    {% endif %}
  }
}

window.addEvent("domready", function() {
  navparams = new Hash({
    {% join navparams %}
  }); 
  {% block js %}{% endblock %}
  current_anchor.set_default_callback({{ defcallback }});
});
</script>
{% endblock %}
{% block content %}
{% block leftcol %}{% endblock %}
<div id="listing">{{ listing }}</div>
<div class="spacer"></div>
{% endblock %}
{% block footer %}
<div id="navbar">{{ navbar }}</div>
{% endblock %}

